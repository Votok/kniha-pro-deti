/* ==========================================================================
   CSS Foundation Layer - Design Tokens & Global Rules
   knihaprodeti.cz - Bootstrap 5 CDN Implementation
   ========================================================================== */

/* ==========================================================================
   1. CSS CUSTOM PROPERTIES - DESIGN TOKENS
   ========================================================================== */

:root {
  /* Brand Colors - Light Mode */
  --color-primary: 25 55% 40%;        /* #9B6239 - warm brown */
  --color-primary-fg: 0 0% 100%;      /* #FFFFFF */
  --color-secondary: 140 25% 90%;     /* #D9EDE2 - soft sage green */
  --color-secondary-fg: 140 30% 30%;  /* #3D664D */
  --color-accent: 45 90% 65%;         /* #F5D54A - golden yellow */
  --color-accent-fg: 35 50% 25%;      /* #5F4A28 */

  /* Theme Colors */
  --color-storybook: 210 50% 45%;     /* #3C73AC - trust blue */
  --color-storybook-fg: 0 0% 100%;    /* #FFFFFF */
  --color-forest: 150 35% 35%;        /* #3D7358 - nature green */
  --color-forest-fg: 0 0% 100%;       /* #FFFFFF */

  /* Background & Surface Colors */
  --color-background: 40 33% 97%;     /* #F9F6F2 - warm cream */
  --color-foreground: 25 30% 20%;     /* #423025 - primary text */
  --color-card: 40 40% 99%;           /* #FDFCFA */
  --color-card-fg: 25 30% 20%;        /* #423025 */
  --color-popover: 40 40% 99%;        /* #FDFCFA */
  --color-popover-fg: 25 30% 20%;     /* #423025 */

  /* Muted & Utility Colors */
  --color-muted: 30 20% 94%;          /* #F2EFEB - subtle backgrounds */
  --color-muted-fg: 25 15% 45%;       /* #7A6F62 - secondary/muted text */
  --color-border: 30 25% 88%;         /* #E8E0D5 - subtle borders */
  --color-input: 30 25% 88%;          /* #E8E0D5 - form input borders */
  --color-ring: 15 85% 60%;           /* #E8784B - focus rings */

  /* Feedback Colors */
  --color-destructive: 0 84.2% 60.2%; /* #ED5555 - error states */
  --color-destructive-fg: 210 40% 98%; /* #F5F8FC */

  /* Shadows */
  --shadow-soft: 0 4px 20px -4px hsl(30 30% 50% / 0.15);
  --shadow-card: 0 8px 30px -8px hsl(30 30% 50% / 0.2);
  --shadow-book: 0 12px 40px -10px hsl(30 30% 40% / 0.25);

  /* Border Radius */
  --radius-sm: 0.5rem;      /* 8px */
  --radius-md: 0.75rem;     /* 12px */
  --radius-lg: 1rem;        /* 16px */
  --radius-xl: 1.25rem;     /* 20px */
  --radius-2xl: 1.5rem;     /* 24px */
  --radius-full: 9999px;    /* Full pill */

  /* Bootstrap Focus Ring */
  --bs-focus-ring-width: 2px;
  --bs-focus-ring-opacity: 1;
  --bs-focus-ring-color: hsl(var(--color-ring));
}

/* ==========================================================================
   3. DARK MODE
   ========================================================================== */

@media (prefers-color-scheme: dark) {
  :root {
    /* Brand Colors - Dark Mode */
    --color-primary: 25 50% 50%;        /* #BF7540 - warmer, lighter brown */
    --color-primary-fg: 0 0% 100%;      /* #FFFFFF */
    --color-secondary: 140 20% 20%;     /* #293D30 - deeper sage green */
    --color-secondary-fg: 140 25% 85%;  /* #C3DED0 */
    --color-accent: 45 80% 50%;         /* #E6BA19 - more saturated gold */
    --color-accent-fg: 0 0% 100%;       /* #FFFFFF */

    /* Theme Colors - Dark Mode */
    --color-storybook: 210 45% 55%;     /* #5A8EC2 - lighter blue */
    --color-storybook-fg: 0 0% 100%;    /* #FFFFFF */
    --color-forest: 150 30% 45%;        /* #508668 - lighter forest green */
    --color-forest-fg: 0 0% 100%;       /* #FFFFFF */

    /* Background & Surface - Dark Mode */
    --color-background: 25 25% 10%;     /* #201813 - dark page background */
    --color-foreground: 40 30% 95%;     /* #F7F4EE - primary text */
    --color-card: 25 20% 14%;           /* #2A221E */
    --color-card-fg: 40 30% 95%;        /* #F7F4EE */
    --color-popover: 25 20% 14%;        /* #2A221E */
    --color-popover-fg: 40 30% 95%;     /* #F7F4EE */

    /* Muted & Utility - Dark Mode */
    --color-muted: 25 15% 20%;          /* #3D312C */
    --color-muted-fg: 30 15% 60%;       /* #A89C8F */
    --color-border: 25 15% 25%;         /* #4A3E36 */
    --color-input: 25 15% 25%;          /* #4A3E36 */
    --color-ring: 15 80% 55%;           /* #DF6633 */

    /* Feedback - Dark Mode */
    --color-destructive: 0 62.8% 30.6%; /* #7F2323 */
    --color-destructive-fg: 210 40% 98%; /* #F5F8FC */
  }
}

/* ==========================================================================
   4. GLOBAL ELEMENT RULES
   ========================================================================== */

/* Body */
body {
  font-family: "Inter", system-ui, -apple-system, sans-serif;
  font-size: 1rem;
  line-height: 1.5;
  color: hsl(var(--color-foreground));
  background-color: hsl(var(--color-background));
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Headings - Base Styles */
h1, h2, h3, h4, h5, h6,
.h1, .h2, .h3, .h4, .h5, .h6 {
  font-family: "Nunito", system-ui, -apple-system, sans-serif;
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.025em;
  color: hsl(var(--color-foreground));
}

/* Headings - Mobile Sizes (Base) */
h1, .h1 {
  font-size: 2.25rem;  /* 36px */
  font-weight: 800;
}

h2, .h2 {
  font-size: 1.875rem; /* 30px */
}

h3, .h3 {
  font-size: 1.5rem;   /* 24px */
}

h4, .h4 {
  font-size: 1.25rem;  /* 20px */
  line-height: 1.4;
}

h5, .h5 {
  font-size: 1.125rem; /* 18px */
  line-height: 1.4;
}

h6, .h6 {
  font-size: 1rem;     /* 16px */
  line-height: 1.4;
}

/* Headings - Tablet Sizes */
@media (min-width: 768px) {
  h1, .h1 { font-size: 3rem; }      /* 48px */
  h2, .h2 { font-size: 2.25rem; }   /* 36px */
  h3, .h3 { font-size: 1.75rem; }   /* 28px */
  h4, .h4 { font-size: 1.5rem; }    /* 24px */
  h5, .h5 { font-size: 1.25rem; }   /* 20px */
  h6, .h6 { font-size: 1rem; }      /* 16px */
}

/* Headings - Desktop Sizes */
@media (min-width: 1024px) {
  h1, .h1 { font-size: 3.75rem; }   /* 60px */
  h2, .h2 { font-size: 3rem; }      /* 48px */
  h3, .h3 { font-size: 2rem; }      /* 32px */
  h4, .h4 { font-size: 1.5rem; }    /* 24px */
  h5, .h5 { font-size: 1.25rem; }   /* 20px */
  h6, .h6 { font-size: 1.125rem; }  /* 18px */
}

/* Links */
a {
  color: hsl(var(--color-primary));
  text-decoration: none;
  transition: color 0.2s ease-out, text-decoration-color 0.2s ease-out;
}

a:hover {
  color: hsl(var(--color-primary));
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 4px;
}

/* ==========================================================================
   5. BOOTSTRAP UTILITY OVERRIDES
   ========================================================================== */

/* Text Color Utilities */
.text-primary {
  color: hsl(var(--color-primary)) !important;
}

.text-secondary {
  color: hsl(var(--color-secondary-fg)) !important;
}

.text-muted {
  color: hsl(var(--color-muted-fg)) !important;
}

/* Background Color Utilities */
.bg-primary {
  background-color: hsl(var(--color-primary)) !important;
}

.bg-secondary {
  background-color: hsl(var(--color-secondary)) !important;
}

.bg-light {
  background-color: hsl(var(--color-background)) !important;
}

.bg-dark {
  background-color: hsl(var(--color-foreground)) !important;
}

/* Border Color Utilities */
.border-primary {
  border-color: hsl(var(--color-primary)) !important;
}

.border-secondary {
  border-color: hsl(var(--color-secondary)) !important;
}

/* ==========================================================================
   6. BOOTSTRAP COMPONENT OVERRIDES
   ========================================================================== */

/* Buttons - Base */
.btn {
  font-family: "Nunito", system-ui, -apple-system, sans-serif;
  font-weight: 600;
  border-radius: var(--radius-md);
  transition: background-color 0.2s ease-out,
              transform 0.2s ease-out,
              box-shadow 0.2s ease-out,
              opacity 0.2s ease-out,
              color 0.2s ease-out,
              border-color 0.2s ease-out;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-card);
}

.btn:focus-visible {
  outline: 2px solid hsl(var(--color-ring));
  outline-offset: 2px;
  box-shadow: none;
}

.btn:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

.btn:disabled,
.btn.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
  transform: none;
}

/* Button - Primary Variant */
.btn-primary {
  background-color: hsl(var(--color-primary));
  border-color: hsl(var(--color-primary));
  color: hsl(var(--color-primary-fg));
}

.btn-primary:hover,
.btn-primary:focus {
  background-color: hsl(var(--color-primary) / 0.9);
  border-color: hsl(var(--color-primary) / 0.9);
  color: hsl(var(--color-primary-fg));
}

.btn-primary:active,
.btn-primary.active {
  background-color: hsl(var(--color-primary) / 0.9);
  border-color: hsl(var(--color-primary) / 0.9);
}

/* Button - Secondary Variant */
.btn-secondary {
  background-color: hsl(var(--color-secondary));
  border-color: hsl(var(--color-secondary));
  color: hsl(var(--color-secondary-fg));
}

.btn-secondary:hover,
.btn-secondary:focus {
  background-color: hsl(var(--color-secondary) / 0.9);
  border-color: hsl(var(--color-secondary) / 0.9);
  color: hsl(var(--color-secondary-fg));
}

.btn-secondary:active,
.btn-secondary.active {
  background-color: hsl(var(--color-secondary) / 0.9);
  border-color: hsl(var(--color-secondary) / 0.9);
}

/* Button - Danger Variant (Destructive) */
.btn-danger {
  background-color: hsl(var(--color-destructive));
  border-color: hsl(var(--color-destructive));
  color: hsl(var(--color-destructive-fg));
}

.btn-danger:hover,
.btn-danger:focus {
  background-color: hsl(var(--color-destructive) / 0.9);
  border-color: hsl(var(--color-destructive) / 0.9);
  color: hsl(var(--color-destructive-fg));
}

/* Button - Outline Variants */
.btn-outline-primary {
  border-color: hsl(var(--color-primary));
  color: hsl(var(--color-primary));
}

.btn-outline-primary:hover,
.btn-outline-primary:focus {
  background-color: hsl(var(--color-primary));
  border-color: hsl(var(--color-primary));
  color: hsl(var(--color-primary-fg));
}

.btn-outline-secondary {
  border-color: hsl(var(--color-secondary-fg));
  color: hsl(var(--color-secondary-fg));
}

.btn-outline-secondary:hover,
.btn-outline-secondary:focus {
  background-color: hsl(var(--color-secondary));
  border-color: hsl(var(--color-secondary));
  color: hsl(var(--color-secondary-fg));
}

/* Cards - Base */
.card {
  background-color: hsl(var(--color-card));
  color: hsl(var(--color-card-fg));
  border: 1px solid hsl(var(--color-border));
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-soft);
  transition: transform 0.3s ease-out, box-shadow 0.3s ease-out;
}

.card-body {
  padding: 1.5rem;
}

.card-header {
  padding: 1.5rem;
  background-color: transparent;
  border-bottom: 1px solid hsl(var(--color-border));
}

.card-footer {
  padding: 1.5rem;
  background-color: transparent;
  border-top: 1px solid hsl(var(--color-border));
}

.card-title {
  font-family: "Nunito", system-ui, -apple-system, sans-serif;
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 0.75rem;
  color: hsl(var(--color-foreground));
}

.card-text {
  color: hsl(var(--color-card-fg));
}

/* ==========================================================================
   7. KEYFRAME ANIMATIONS
   ========================================================================== */

/* Floating Book Animations */
@keyframes float1 {
  0%, 100% {
    transform: translateY(0) rotate(-8deg);
  }
  50% {
    transform: translateY(-15px) rotate(-5deg);
  }
}

@keyframes float2 {
  0%, 100% {
    transform: translateY(0) rotate(2deg);
  }
  50% {
    transform: translateY(-12px) rotate(0deg);
  }
}

@keyframes float3 {
  0%, 100% {
    transform: translateY(0) rotate(6deg);
  }
  50% {
    transform: translateY(-18px) rotate(8deg);
  }
}

@keyframes float4 {
  0%, 100% {
    transform: translateY(0) rotate(-5deg);
  }
  50% {
    transform: translateY(-12px) rotate(-3deg);
  }
}

@keyframes float5 {
  0%, 100% {
    transform: translateY(0) rotate(4deg);
  }
  50% {
    transform: translateY(-14px) rotate(6deg);
  }
}

/* Entrance Animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Scroll Indicator Animation */
@keyframes bounce {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-12px);
  }
}

/* ==========================================================================
   8. FOCUS STATES
   ========================================================================== */

.btn:focus-visible,
a:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid hsl(var(--color-ring));
  outline-offset: 2px;
  box-shadow: none;
}

.btn:focus:not(:focus-visible),
a:focus:not(:focus-visible),
input:focus:not(:focus-visible),
textarea:focus:not(:focus-visible),
select:focus:not(:focus-visible) {
  outline: none;
  box-shadow: none;
}

/* ==========================================================================
   9. REDUCED MOTION SUPPORT
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
